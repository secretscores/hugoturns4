<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üéÉ Happy Halloween Birthday üßü</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Creepster&display=swap" rel="stylesheet">
    <style>
        /* Variables y Base */
        :root {
            --dark-bg: #1A002C; /* Fondo muy oscuro */
            --accent-purple: #9D3CFF; /* Morado el√©ctrico */
            --accent-orange: #FF8C00; /* Naranja ne√≥n */
            --text-color: #E0E0E0;
            --font-main: 'Montserrat', sans-serif;
            --font-title: 'Creepster', cursive;
        }

        body {
            font-family: var(--font-main);
            color: var(--text-color);
            background-color: var(--dark-bg);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            /* Efecto de ruido/estrellas en el fondo para un look moderno */
            background-image: radial-gradient(#300050 40%, transparent 40%),
                              radial-gradient(#300050 20%, transparent 20%);
            background-size: 5px 5px;
            background-position: 0 0, 10px 10px;
        }

        /* --- PANTALLA DE INICIO (PORTAL) --- */
        #welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--dark-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: pointer;
            transition: opacity 0.5s ease-out;
        }

        .portal-text {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--accent-orange);
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(255, 140, 0, 0.7);
            animation: flicker 1s infinite alternate; /* Efecto de ne√≥n */
        }
        .portal-icon {
            font-size: 4em;
            color: var(--accent-purple);
            animation: pulse-icon 1.5s infinite alternate;
        }

        /* --- TARJETA PRINCIPAL (ESTILO APP) --- */
        .invitation-card {
            width: 90%;
            max-width: 380px;
            min-height: 600px;
            background: linear-gradient(145deg, rgba(26, 0, 44, 0.95) 0%, rgba(32, 0, 48, 0.9) 100%);
            border-radius: 30px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.7), 0 0 25px var(--accent-purple);
            padding: 30px 20px;
            box-sizing: border-box;
            text-align: center;
            position: relative;
            z-index: 50;
            /* Animaci√≥n de apertura: se desvanece y rota */
            opacity: 0;
            transform: scale(0.8) rotateY(-15deg); 
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

        /* T√≠tulo Principal (Estilo Ne√≥n/Game) */
        h1 {
            font-family: var(--font-title);
            font-size: 3.5em;
            color: var(--accent-orange);
            text-shadow: 0 0 10px var(--accent-orange), 0 0 20px rgba(255, 140, 0, 0.5);
            margin-bottom: 15px;
            line-height: 1.1;
            transform: scale(0.9);
            animation: title-pop 0.8s ease-out forwards;
        }
        @keyframes title-pop {
            0% { opacity: 0; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1); }
        }

        /* Subt√≠tulos y Texto */
        h2 {
            font-size: 1.2em;
            font-weight: 700;
            color: var(--accent-purple);
            margin: 10px 0 25px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        p {
            font-size: 1em;
            margin: 15px 0;
            line-height: 1.5;
            color: var(--text-color);
        }

        /* Detalles del Evento (Panel de Datos) */
        .data-panel {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--accent-purple);
            border-radius: 10px;
            padding: 20px 10px;
            margin: 30px 0;
            box-shadow: 0 0 15px rgba(157, 60, 255, 0.3);
            text-align: left;
        }
        .data-panel p {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 15px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }
        .data-panel p:last-child {
            border-bottom: none;
        }
        .data-panel span {
            font-weight: 900;
            color: var(--accent-orange);
            text-shadow: 0 0 5px rgba(255, 140, 0, 0.5);
        }

        /* Bot√≥n de Ubicaci√≥n (Glow) */
        .location-button {
            display: block;
            margin: 30px auto;
            padding: 18px 30px;
            background: var(--accent-purple);
            color: var(--dark-bg);
            text-decoration: none;
            font-weight: 900;
            border-radius: 50px;
            box-shadow: 0 0 20px var(--accent-purple);
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: none;
        }

        .location-button:hover {
            background: var(--accent-orange);
            color: #fff;
            box-shadow: 0 0 25px var(--accent-orange);
            transform: scale(1.05);
        }

        /* --- Elementos de Efecto (Flotantes) --- */
        .effect-item {
            position: absolute;
            font-size: 3em;
            opacity: 0.5;
            pointer-events: none;
            animation: float-and-sway 15s linear infinite;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.5));
        }

        .effect-item:nth-child(1) { top: 5%; left: 5%; animation-duration: 12s; color: var(--accent-orange); }
        .effect-item:nth-child(2) { top: 25%; right: 10%; animation-duration: 10s; animation-delay: 3s; color: var(--accent-purple); }
        .effect-item:nth-child(3) { bottom: 6%; left: 20%; animation-duration: 14s; animation-delay: 6s; color: var(--text-color); }
        
        /* Animaci√≥n de los elementos flotantes */
        @keyframes float-and-sway {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            20% { opacity: 0.7; }
            50% { transform: translate(10px, -20px) rotate(5deg); opacity: 0.9; }
            80% { opacity: 0.7; }
            100% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
        }

        @keyframes flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% { opacity: 1; text-shadow: 0 0 15px rgba(255, 140, 0, 0.7); }
            20%, 24%, 55% { opacity: 0.4; text-shadow: none; }
        }
        @keyframes pulse-icon {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        /* Clase para la animaci√≥n de entrada de la tarjeta */
        .show-card {
            opacity: 1 !important;
            transform: scale(1) rotateY(0deg) !important;
        }
    </style>
</head>
<body>

    <div id="welcome-screen">
        <h1 class="portal-text">HUGO TURNS 4!</h1>
        <p>¬øEst√°n listos?...</p>
        <div class="portal-icon">üéÉ</div>
        <p class="small-instruction" style="margin-top: 50px; color: var(--accent-purple);">Toca la pantalla para abrir el portal</p>
    </div>

    
    

    <div class="invitation-card" id="invitation-card-content">
        
        <span class="effect-item">ü¶á</span>
        <span class="effect-item">üéÉ</span>
        <span class="effect-item">üßü</span>

        <h1>¬°Hugo Turns 4!</h1>
        <h2>Happy Halloween Birthday</h2>

        <p>¬°Acom√°pa√±os a celebrar el cumple n√∫mero 4 de Hugo, te esperamos!</p>
        
        <div class="data-panel">
            <p>FECHA: <span>üéÉ 30 DE OCTUBRE</span></p>
            <p>HORA: <span>‚è∞ 04:00 PM</span></p>
            <p>TIP: <span>üëª Trae tu Disfraz</span></p>
            <p>LUGAR: <span>üó∫Ô∏è Privada Los Reyes</span></p>
        </div>

        <a id="map-link" href="#" class="location-button" target="_blank">
            UBICACI√ìN
        </a>

        <p style="font-size: 0.9em; color: var(--accent-purple);">Confirma tu asistencia al +52 123 456 7890</p>
    </div>

    <script>
        // --- CONFIGURACI√ìN DE LA FIESTA ---
        const LATITUD = 25.757046;
        const LONGITUD = -109.023735;
        const LUGAR_FIESTA = "Fiesta de Hugo"; 

        // --- FUNCIONALIDAD DE INTERACCI√ìN Y AUDIO ---
        const welcomeScreen = document.getElementById('welcome-screen');
        const invitationCardContent = document.getElementById('invitation-card-content');
        const bgMusic = document.getElementById('background-music');
        const entrySound = document.getElementById('entry-sound');
        const mapLink = document.getElementById('map-link');

        // 1. Configuraci√≥n del Enlace al Mapa (Mejorado para iOS/Android)
        function createMapLink(lat, lng, label) {
            const isAppleDevice = /iPhone|iPad|iPod/i.test(navigator.userAgent);
            let url;
            if (isAppleDevice) {
                // Abre Apple Maps con el marcador
                url = `http://maps.apple.com/?ll=${lat},${lng}&q=${encodeURIComponent(label)}&z=15`;
            } else {
                // Abre Google Maps (funciona bien en Android y otros navegadores)
                url = `https://www.google.com/maps/search/?api=1&query=${lat},${lng}&query_place_id=${encodeURIComponent(label)}`;
            }
            return url;
        }
        mapLink.href = createMapLink(LATITUD, LONGITUD, LUGAR_FIESTA);

        // 2. Evento al Tocar el Portal
        welcomeScreen.addEventListener('click', () => {
            // Transici√≥n del Portal a la Tarjeta
            welcomeScreen.style.opacity = '0';
            invitationCardContent.classList.add('show-card'); 

            setTimeout(() => {
                welcomeScreen.style.display = 'none';
            }, 500);

            // Reproducir sonidos
            try {
                // Sonido de "Susto/Flash" o de "Portal"
                entrySound.volume = 1.0; 
                entrySound.play();
                
                // M√∫sica de fondo (se inicia despu√©s del sonido fuerte)
                setTimeout(() => {
                    bgMusic.volume = 0.3; // Volumen bajo para que el texto sea legible
                    bgMusic.play().catch(e => console.error("M√∫sica de fondo no pudo iniciarse:", e));
                }, 700); 
            } catch (error) {
                console.error("Error al reproducir audio:", error);
            }
        });
    </script>

<script>
// --- M√∫sica t√©trica infantil estilo videojuego (Web Audio API) ---
let ctx, master, isPlaying = false, nodes=[];
const BPM = 96;
const STEP = 60/BPM;
const SCALE = {A:220, C:261.63, D:293.66, E:329.63, F:349.23, G:392.00};
const PROG = [ {r:'A',t:'m'}, {r:'F',t:'M'}, {r:'D',t:'m'}, {r:'E',t:'7'} ];

function ensureAudio(){
  if(!ctx){
    ctx = new (window.AudioContext||window.webkitAudioContext)();
    master = ctx.createGain();
    master.gain.value = 0.6;
    master.connect(ctx.destination);
  }
}

function tone(freq, t, dur, type='triangle', vol=0.18){
  const o = ctx.createOscillator(), g = ctx.createGain();
  o.type = type; o.frequency.value = freq;
  g.gain.setValueAtTime(0.0001, t);
  g.gain.exponentialRampToValueAtTime(vol, t+0.01);
  g.gain.exponentialRampToValueAtTime(0.0001, t+dur);
  o.connect(g).connect(master);
  o.start(t); o.stop(t+dur+0.05);
  nodes.push(o,g);
}

function chord(root, type){
  const r = SCALE[root], m3=Math.pow(2,3/12), M3=Math.pow(2,4/12), P5=Math.pow(2,7/12), m7=Math.pow(2,10/12);
  if(type==='m') return [r, r*m3, r*P5];
  if(type==='M') return [r, r*M3, r*P5];
  if(type==='7') return [r, r*M3, r*P5, r*m7];
  return [r, r*M3, r*P5];
}

function scheduleBar(t0, idx){
  const {r,t} = PROG[idx%PROG.length];
  const notes = chord(r,t);
  for(let k=0;k<4;k++) tone(notes[0]/2, t0 + k*STEP, STEP*0.45, 'sine', 0.12);
  const arp = [notes[0],notes[1],notes[2],notes[1],notes[0]*2,notes[2],notes[1],notes[0]*2];
  for(let j=0;j<arp.length;j++) tone(arp[j], t0 + j*(STEP/2), STEP*0.42, 'triangle', 0.15);
  const mel = [notes[2]*1.1, notes[1]*1.2, notes[0]*2, notes[2]*1.05];
  for(let m=0;m<mel.length;m++) tone(mel[m], t0 + m*STEP, STEP*0.6, 'sine', 0.2);
}

function startMusic(){
  if(isPlaying) return;
  ensureAudio();
  ctx.resume().then(()=>{
    isPlaying = true;
    const now = ctx.currentTime; 
    let t = now+0.05, bar = 0;
    (function loop(){
      if(!isPlaying) return;
      while(t < ctx.currentTime+2){ scheduleBar(t, bar); t+=STEP*4; bar++; }
      requestAnimationFrame(loop);
    })();
  });
}

function stopMusic(){
  isPlaying=false;
  nodes.forEach(n=>{try{n.stop()}catch(_){}}); nodes=[];
}

document.addEventListener('DOMContentLoaded', () => {
  const gateBtn = document.getElementById('enterBtn') || document.querySelector('.portal-icon') || document.querySelector('.enter');
  const welcomeScreen = document.getElementById('welcome-screen');
  if(gateBtn){
    gateBtn.addEventListener('click', ()=>{
      ensureAudio();
      ctx.resume().then(()=>{
        stopMusic(); startMusic();
        if(welcomeScreen){ welcomeScreen.style.opacity = '0'; setTimeout(()=>{ welcomeScreen.style.display='none'; }, 500); }
      });
    });
  }
});
</script>

</body>
</html>
